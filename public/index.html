<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
			integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
			crossorigin="anonymous"
		/>
		<link rel="stylesheet" href="css/style.css" />
		<title>ChatCord App</title>
	</head>
	<body>
		<div class="join-container">
			<header class="join-header">
				<h1><i class="fas fa-smile"></i> ChatCord</h1>
			</header>
			<main class="join-main">
				<form action="chat.html">
					<div class="form-control">
						<label for="username">Username</label>
						<input type="text" name="username" id="username" placeholder="Enter username..." required />
					</div>
					<div class="form-control">
						<label for="room">Room</label>
						<select name="room" id="room">
							<option value="JavaScript">JavaScript</option>
							<option value="Python">Python</option>
							<option value="PHP">PHP</option>
							<option value="C#">C#</option>
							<option value="Ruby">Ruby</option>
							<option value="Java">Java</option>
						</select>
					</div>
					<button type="submit" class="btn">Join Chat</button>
				</form>

				<script>
				// Prefill username from localStorage (if present)
				(function(){
					try{
						const saved = localStorage.getItem('chatcordUser');
						if(saved){
							const input = document.getElementById('username');
							if(input) input.value = saved;
						}
					}catch(e){}
				})();
				</script>
			</main>
		</div>

		<!-- Theme toggle (fixed top-right) -->
		<button id="theme-toggle" class="btn theme-toggle" aria-label="Toggle theme">ðŸŒ—</button>

		<!-- Inline theme toggle logic for index (keeps index lightweight and avoids loading chat JS) -->
		<script>
		(function(){
			const THEME_KEY = 'chatcordTheme';
			const toggle = document.getElementById('theme-toggle');
			function applyTheme(theme){
				if(theme==='dark') document.body.classList.add('dark'); else document.body.classList.remove('dark');
				try{ localStorage.setItem(THEME_KEY, theme); }catch(e){}
			}
			const saved = (function(){ try{ return localStorage.getItem(THEME_KEY);}catch(e){return null;} })();
			const defaultTheme = saved || (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
			applyTheme(defaultTheme);
			if(!toggle) return;
			toggle.innerText = document.body.classList.contains('dark') ? 'ðŸŒ™' : 'ðŸŒ—';
			toggle.addEventListener('click', ()=>{
				const isDark = document.body.classList.toggle('dark');
				applyTheme(isDark ? 'dark' : 'light');
				toggle.innerText = isDark ? 'ðŸŒ™' : 'ðŸŒ—';
			});
		})();
		</script>
	</body>
</html>
